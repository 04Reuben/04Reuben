import{h as te,x as ae,y as oe,z as ne,c as I,a as e,w as t,g as p,e as N,s as V,r as s,f as se,o as C,b as le,d as v,i as S,q as re,t as D,F as ie,m as de,A as ue,_ as ce}from"./index-DmuTLrRo.js";import{L as _e}from"./LineChart-DulrE5F6.js";const fe={class:"dashboard"},me={class:"activity-item"},ge={class:"activity-title"},pe={class:"activity-time"},q="dashboard_todos",B="dashboard_tour_done",ve=te({__name:"Home",setup(ye){const E=le(),i=p(!1),u=se({users:0,orders:0,conversion:0,errors:0}),m=p([]),w=p([]),y=p({dates:[],values:[]});function F(o){return new Promise(a=>setTimeout(a,o))}function g(o,a){return Math.floor(Math.random()*(a-o+1))+o}function H(){const o=new Date,a=l=>String(l).padStart(2,"0");return`${o.getFullYear()}-${a(o.getMonth()+1)}-${a(o.getDate())} ${a(o.getHours())}:${a(o.getMinutes())}:${a(o.getSeconds())}`}function U(o){const a=l=>String(l).padStart(2,"0");return`${a(o.getMonth()+1)}-${a(o.getDate())}`}function Y(){return{users:g(1200,5600),orders:g(80,420),conversion:Number((Math.random()*8+1).toFixed(2)),errors:g(0,12)}}function k(){return[{id:"t1",title:"检查今日订单异常",done:!1},{id:"t2",title:"更新表单校验规则",done:!1},{id:"t3",title:"回访关键客户",done:!0},{id:"t4",title:"整理本周发布计划",done:!1}]}function T(){const o=["登录系统","查看 Dashboard","打开用户列表","更新用户角色","导出 CSV 报表","创建新表单","切换主题","批量删除用户"];return Array.from({length:6}).map((a,l)=>{const d=o[g(0,o.length-1)];return{id:`a_${Date.now()}_${l}`,title:d,time:H()}})}function $(o=7){const a=[],l=[],d=new Date;for(let n=o-1;n>=0;n-=1){const f=new Date(d);f.setDate(d.getDate()-n),a.push(U(f)),l.push(g(800,5200))}return{dates:a,values:l}}function z(){const o=localStorage.getItem(q);if(!o)return k();try{const a=JSON.parse(o);return Array.isArray(a)?a:k()}catch{return k()}}function M(o){localStorage.setItem(q,JSON.stringify(o))}function J(o,a){const l=m.value.map(d=>d.id===o?{...d,done:a}:d);m.value=l,M(l)}function L(o){E.push(o)}function K(){N.info("查看日志：示例占位（可接入 /logs 页面）")}const R=V(()=>({grid:{left:12,right:12,top:24,bottom:12,containLabel:!0},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:y.value.dates,axisTick:{show:!1}},yAxis:{type:"value",axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},series:[{name:"Visits",type:"line",smooth:!0,showSymbol:!1,data:y.value.values,areaStyle:{opacity:.08},lineStyle:{width:2}}]}));async function O(){i.value=!0;try{await F(600);const o=Y();u.users=o.users,u.orders=o.orders,u.conversion=o.conversion,u.errors=o.errors,w.value=T(),y.value=$(7),N.success("数据已刷新")}finally{i.value=!1}}ae(m,o=>{M(o)},{deep:!0});const h=p(!1),j=V(()=>[{title:"菜单导航",description:"从这里快速访问各个模块页面。",target:()=>document.querySelector(".guide-menu")},{title:"主题切换",description:"支持 Light/Dark 主题切换，并会自动保存。",target:()=>document.querySelector(".guide-theme")},{title:"用户菜单",description:"在这里查看用户信息、退出登录。",target:()=>document.querySelector(".guide-user")},{title:"快捷操作",description:"常用入口一键直达，提高效率。",target:()=>document.querySelector(".guide-shortcuts")}]);function G(){localStorage.setItem(B,"1"),h.value=!1}return oe(async()=>{m.value=z(),w.value=T(),y.value=$(7),await O(),await ne(),localStorage.getItem(B)||(h.value=!0)}),(o,a)=>{const l=s("a-tour"),d=s("a-typography-title"),n=s("a-col"),f=s("a-button"),x=s("a-row"),b=s("a-statistic"),c=s("a-skeleton"),_=s("a-card"),A=s("a-space"),P=s("a-checkbox"),Q=s("a-list-item"),W=s("a-list"),X=s("a-timeline-item"),Z=s("a-timeline");return C(),I("div",fe,[e(l,{open:h.value,"onUpdate:open":a[0]||(a[0]=r=>h.value=r),steps:j.value,onClose:G},null,8,["open","steps"]),e(x,{justify:"space-between",align:"middle",style:{"margin-bottom":"16px"}},{default:t(()=>[e(n,null,{default:t(()=>[e(d,{level:4,style:{margin:"0"}},{default:t(()=>[...a[3]||(a[3]=[v("Dashboard",-1)])]),_:1})]),_:1}),e(n,null,{default:t(()=>[e(f,{loading:i.value,onClick:O},{default:t(()=>[...a[4]||(a[4]=[v(" 刷新 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),e(x,{gutter:16,style:{"margin-bottom":"16px"}},{default:t(()=>[e(n,{xs:24,sm:12,md:6},{default:t(()=>[e(_,{bordered:!1},{default:t(()=>[e(c,{loading:i.value,active:""},{default:t(()=>[e(b,{title:"Users",value:u.users},null,8,["value"])]),_:1},8,["loading"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:6},{default:t(()=>[e(_,{bordered:!1},{default:t(()=>[e(c,{loading:i.value,active:""},{default:t(()=>[e(b,{title:"Orders",value:u.orders},null,8,["value"])]),_:1},8,["loading"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:6},{default:t(()=>[e(_,{bordered:!1},{default:t(()=>[e(c,{loading:i.value,active:""},{default:t(()=>[e(b,{title:"Conversion",value:u.conversion,suffix:"%",precision:2},null,8,["value"])]),_:1},8,["loading"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:6},{default:t(()=>[e(_,{bordered:!1},{default:t(()=>[e(c,{loading:i.value,active:""},{default:t(()=>[e(b,{title:"Errors",value:u.errors},null,8,["value"])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(x,{gutter:16,style:{"margin-bottom":"16px"}},{default:t(()=>[e(n,{xs:24,md:12},{default:t(()=>[e(_,{bordered:!1,title:"快捷操作",class:"guide-shortcuts"},{default:t(()=>[e(c,{loading:i.value,active:""},{default:t(()=>[e(A,{wrap:""},{default:t(()=>[e(f,{type:"primary",onClick:a[1]||(a[1]=r=>L("/form"))},{default:t(()=>[...a[5]||(a[5]=[v("新建表单",-1)])]),_:1}),e(f,{onClick:a[2]||(a[2]=r=>L("/list"))},{default:t(()=>[...a[6]||(a[6]=[v("打开列表",-1)])]),_:1}),e(f,{onClick:K},{default:t(()=>[...a[7]||(a[7]=[v("查看日志",-1)])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),e(n,{xs:24,md:12},{default:t(()=>[e(_,{bordered:!1,title:"待办"},{default:t(()=>[e(c,{loading:i.value,active:""},{default:t(()=>[e(W,{"data-source":m.value,locale:{emptyText:"暂无待办"}},{renderItem:t(({item:r})=>[e(Q,null,{default:t(()=>[e(A,null,{default:t(()=>[e(P,{checked:r.done,onChange:ee=>J(r.id,ee.target.checked)},null,8,["checked","onChange"]),S("span",{class:re({done:r.done})},D(r.title),3)]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(x,{gutter:16,style:{"margin-bottom":"16px"}},{default:t(()=>[e(n,{xs:24,md:14},{default:t(()=>[e(_,{bordered:!1,title:"访问趋势"},{default:t(()=>[e(c,{loading:i.value,active:""},{default:t(()=>[e(_e,{option:R.value,height:"280px"},null,8,["option"])]),_:1},8,["loading"])]),_:1})]),_:1}),e(n,{xs:24,md:10},{default:t(()=>[e(_,{bordered:!1,title:"最近活动"},{default:t(()=>[e(c,{loading:i.value,active:""},{default:t(()=>[e(Z,null,{default:t(()=>[(C(!0),I(ie,null,de(w.value,r=>(C(),ue(X,{key:r.id},{default:t(()=>[S("div",me,[S("div",ge,D(r.title),1),S("div",pe,D(r.time),1)])]),_:2},1024))),128))]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})])}}}),be=ce(ve,[["__scopeId","data-v-86e96b78"]]);export{be as default};
