import{h as N,c as n,i as t,j as b,k as P,v as R,t as l,l as i,a as w,F as m,m as y,n as S,p as z,q as C,g as v,s as p,o as d,_ as E}from"./index-DmuTLrRo.js";import{L as M}from"./LineChart-DulrE5F6.js";const F={station:{name:"光伏电站 - A区",code:"PV-A-001",location:"宁夏·银川",capacityMW:120,runningDays:236,onlineRate:98.6,healthIndex:92,updatedAt:"2026-02-06 14:08:21"},trend:{categories:["热斑","隐裂","遮挡","破损","污染","接线异常","逆变器告警","其他"],values:[32,18,14,12,10,8,6,4]},donut:{total:104,segments:[{name:"已闭环",value:62},{name:"处理中",value:28},{name:"待派单",value:14}]},defectCards:[{label:"今日新增",value:8},{label:"未处理",value:14},{label:"处理中",value:28},{label:"已闭环",value:62},{label:"高危",value:6},{label:"复检待确认",value:9}],defectTable:{columns:[{key:"type",title:"缺陷类型"},{key:"count",title:"数量"},{key:"rate",title:"占比"}],rows:[{type:"热斑",count:32,rate:"30.8%"},{type:"隐裂",count:18,rate:"17.3%"},{type:"遮挡",count:14,rate:"13.5%"},{type:"破损",count:12,rate:"11.5%"},{type:"污染",count:10,rate:"9.6%"},{type:"接线异常",count:8,rate:"7.7%"},{type:"逆变器告警",count:6,rate:"5.8%"},{type:"其他",count:4,rate:"3.8%"}]},recentTasks:{emptyText:"暂无最近任务"},map:{imageAlt:"航拍占位图",hotAreas:[{id:"A1",name:"1#方阵-东南角",status:"高亮关注",x:18,y:36,w:22,h:18,tip:`热斑疑似：12处
建议：派单复检`},{id:"B2",name:"2#方阵-中部",status:"复检中",x:58,y:52,w:26,h:20,tip:`隐裂疑似：6处
建议：复检确认`},{id:"C3",name:"3#方阵-西北角",status:"待确认",x:14,y:18,w:22,h:18,tip:`遮挡疑似：3处
建议：复检确认`}]}},O={class:"pv-screen"},X={class:"topbar"},q={class:"topbar-right"},G={class:"search"},U={class:"time"},J={class:"content"},K={class:"col left"},Q={class:"panel"},Y={class:"panel-bd"},Z={class:"panel"},tt={class:"panel-bd"},st={class:"empty"},et={class:"empty-text"},at={class:"panel"},ot={class:"panel-bd"},lt={class:"table"},it={class:"thead"},nt={class:"tr"},dt={class:"tbody"},rt={class:"td"},vt={class:"td num"},ct={class:"td"},pt={class:"col center"},ut={class:"panel map"},ht={class:"panel-bd"},bt=["src"],mt=["onMouseenter"],yt={class:"tooltip-title"},_t={class:"tooltip-body"},ft={class:"col right"},gt={class:"panel"},xt={class:"panel-bd"},kt={class:"kpi-grid"},wt={class:"kpi"},St={class:"v"},Ct={class:"kpi"},Mt={class:"v"},At={class:"kpi"},It={class:"v"},$t={class:"kpi"},Lt={class:"v"},Tt={class:"kpi"},Vt={class:"v"},Bt={class:"kpi"},Wt={class:"v"},Dt={class:"panel"},jt={class:"panel-hd"},Ht={class:"panel-sub"},Nt={class:"panel-bd"},Pt={class:"donut-wrap"},Rt={class:"panel"},zt={class:"panel-bd"},Et={class:"mini-grid"},Ft={class:"mini-v"},Ot={class:"mini-k"},Xt={class:"bottombar"},qt={class:"mode"},Gt=N({__name:"PvBigScreen",setup(Ut){const o=F,f=v(""),u=v("uav"),h=v([{id:"v1",img:"https://picsum.photos/seed/pv-aerial-1/1600/900.jpg"},{id:"v2",img:"https://picsum.photos/seed/pv-aerial-2/1600/900.jpg"},{id:"v3",img:"https://picsum.photos/seed/pv-aerial-3/1600/900.jpg"}]),c=v(0),g=p(()=>h.value[c.value]),A=p(()=>{const s=(o.map.hotAreas||[]).map(H=>({...H,viewId:"v1"})),e=[{id:"C3",name:"3#方阵-西北角",status:"待确认",x:14,y:18,w:22,h:18,tip:`遮挡疑似：3处
建议：复检确认`,viewId:"v2"},{id:"D4",name:"4#方阵-中部",status:"高亮关注",x:52,y:44,w:28,h:22,tip:`热斑疑似：7处
建议：派单复检`,viewId:"v2"},{id:"E5",name:"5#方阵-东侧",status:"复检中",x:76,y:28,w:18,h:26,tip:`隐裂疑似：4处
建议：复检确认`,viewId:"v2"}],k=[{id:"F6",name:"6#方阵-南部",status:"复检中",x:22,y:60,w:26,h:22,tip:`污染疑似：5处
建议：安排清洗`,viewId:"v3"},{id:"G7",name:"7#方阵-中南部",status:"高亮关注",x:56,y:62,w:26,h:20,tip:`破损疑似：2处
建议：现场确认`,viewId:"v3"},{id:"H8",name:"8#方阵-东北角",status:"待确认",x:70,y:22,w:18,h:20,tip:`接线异常：1处
建议：复检确认`,viewId:"v3"}];return[...s,...e,...k]}),I=p(()=>{var s;const a=(s=g.value)==null?void 0:s.id;return A.value.filter(e=>e.viewId===a)}),r=v(null),_=v({});function $(){c.value=(c.value-1+h.value.length)%h.value.length,r.value=null}function L(){c.value=(c.value+1)%h.value.length,r.value=null}function T(a){return{left:`${a.x}%`,top:`${a.y}%`,width:`${a.w}%`,height:`${a.h}%`}}function V(a){r.value=a,_.value=x(a)}function B(){r.value=null}function x(a){const e=a.x+a.w+2<=82;return{left:e?`calc(${a.x}% + ${a.w}% + 10px)`:`calc(${a.x}% - 10px)`,top:`calc(${a.y}% - 4px)`,transform:e?"translateX(0)":"translateX(-100%)"}}function W(a){if(!r.value)return;const s=r.value;_.value=x(s)}const D=p(()=>({grid:{left:80,right:16,top:8,bottom:12},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"var(--chart-tooltip-bg)",borderColor:"var(--chart-tooltip-border)",textStyle:{color:"var(--chart-tooltip-text)"}},xAxis:{type:"value",axisLabel:{color:"var(--chart-axis-label)"},splitLine:{lineStyle:{color:"var(--chart-axis-split)"}}},yAxis:{type:"category",data:o.trend.categories,axisLabel:{color:"var(--chart-axis-label)"},axisLine:{lineStyle:{color:"var(--chart-axis-line)"}},axisTick:{show:!1}},series:[{type:"bar",data:o.trend.values,barWidth:10,showBackground:!0,backgroundStyle:{color:"var(--chart-bar-bg)"},itemStyle:{borderRadius:[6,6,6,6],color:{type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:"var(--chart-bar-color-start)"},{offset:1,color:"var(--chart-bar-color-end)"}]}}}]})),j=p(()=>{const a=["var(--donut-color-1)","var(--donut-color-2)","var(--donut-color-3)"];return{tooltip:{trigger:"item",backgroundColor:"var(--chart-tooltip-bg)",borderColor:"var(--chart-tooltip-border)",textStyle:{color:"var(--chart-tooltip-text)"}},legend:{orient:"vertical",right:8,top:"middle",itemWidth:10,itemHeight:10,textStyle:{color:"var(--chart-legend-text)"}},series:[{name:"缺陷闭环",type:"pie",radius:["55%","75%"],center:["38%","50%"],avoidLabelOverlap:!0,label:{show:!1},labelLine:{show:!1},data:o.donut.segments.map((s,e)=>({...s,itemStyle:{color:a[e]}}))},{name:"内圈",type:"pie",radius:["0%","48%"],center:["38%","50%"],silent:!0,label:{show:!0,position:"center",formatter:`${o.donut.total}`,color:"var(--chart-tooltip-text)",fontSize:28,fontWeight:700},data:[{value:1,name:"total",itemStyle:{color:"var(--donut-color-4)"}}]}]}});return(a,s)=>(d(),n("div",O,[s[24]||(s[24]=t("div",{class:"bg"},null,-1)),t("header",X,[s[5]||(s[5]=b('<div class="topbar-left" data-v-71f2308d><div class="brand-mark" data-v-71f2308d></div><div class="brand-title" data-v-71f2308d>光伏电站智慧巡检平台</div></div><div class="topbar-center" data-v-71f2308d><div class="center-title" data-v-71f2308d><span class="center-line left" data-v-71f2308d></span><span class="center-cap left" data-v-71f2308d></span><span class="center-text" data-v-71f2308d>光伏电站智慧巡检平台</span><span class="center-cap right" data-v-71f2308d></span><span class="center-line right" data-v-71f2308d></span></div></div>',2)),t("div",q,[t("div",G,[s[3]||(s[3]=t("span",{class:"search-icon"},null,-1)),P(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),class:"search-input",placeholder:"搜索场站/方阵/设备"},null,512),[[R,f.value]])]),s[4]||(s[4]=t("button",{class:"filter-btn",type:"button"},"筛选",-1)),t("div",U,l(i(o).station.updatedAt),1)])]),t("main",J,[t("section",K,[t("div",Q,[s[6]||(s[6]=b('<div class="panel-corner tl" data-v-71f2308d></div><div class="panel-corner tr" data-v-71f2308d></div><div class="panel-corner bl" data-v-71f2308d></div><div class="panel-corner br" data-v-71f2308d></div><div class="panel-hd" data-v-71f2308d><div class="panel-title" data-v-71f2308d>缺陷趋势</div><div class="panel-sub" data-v-71f2308d>近 7 日</div></div>',5)),t("div",Y,[w(M,{option:D.value,height:"240px"},null,8,["option"])])]),t("div",Z,[s[8]||(s[8]=b('<div class="panel-corner tl" data-v-71f2308d></div><div class="panel-corner tr" data-v-71f2308d></div><div class="panel-corner bl" data-v-71f2308d></div><div class="panel-corner br" data-v-71f2308d></div><div class="panel-hd" data-v-71f2308d><div class="panel-title" data-v-71f2308d>最近任务</div></div>',5)),t("div",tt,[t("div",st,[s[7]||(s[7]=t("div",{class:"empty-icon"},null,-1)),t("div",et,l(i(o).recentTasks.emptyText),1)])])]),t("div",at,[s[9]||(s[9]=b('<div class="panel-corner tl" data-v-71f2308d></div><div class="panel-corner tr" data-v-71f2308d></div><div class="panel-corner bl" data-v-71f2308d></div><div class="panel-corner br" data-v-71f2308d></div><div class="panel-hd" data-v-71f2308d><div class="panel-title" data-v-71f2308d>缺陷汇总</div></div>',5)),t("div",ot,[t("div",lt,[t("div",it,[t("div",nt,[(d(!0),n(m,null,y(i(o).defectTable.columns,e=>(d(),n("div",{class:"th",key:e.key},l(e.title),1))),128))])]),t("div",dt,[(d(!0),n(m,null,y(i(o).defectTable.rows,e=>(d(),n("div",{class:"tr",key:e.type},[t("div",rt,l(e.type),1),t("div",vt,l(e.count),1),t("div",ct,l(e.rate),1)]))),128))])])])])]),t("section",pt,[t("div",ut,[s[13]||(s[13]=t("div",{class:"panel-hd"},[t("div",{class:"panel-title"},"航拍总览"),t("div",{class:"panel-sub"},"点击区域查看详情")],-1)),t("div",ht,[t("div",{class:"map-wrap",onMousemove:W},[t("img",{class:"map-img",src:g.value.img,alt:"航拍占位图"},null,8,bt),(d(!0),n(m,null,y(I.value,e=>(d(),n("div",{key:e.id,class:"hot",style:S(T(e)),onMouseenter:k=>V(e),onMouseleave:B},null,44,mt))),128)),r.value?(d(),n("div",{key:0,class:"tooltip",style:S(_.value)},[t("div",yt,l(r.value.name),1),t("div",_t,l(r.value.tip),1),s[10]||(s[10]=t("div",{class:"tooltip-actions"},[t("button",{class:"tooltip-btn",type:"button"},"查看详情"),t("button",{class:"tooltip-btn",type:"button"},"派单"),t("button",{class:"tooltip-btn",type:"button"},"忽略")],-1))],4)):z("",!0),t("button",{class:"nav-arrow nav-left",type:"button",onClick:$},[...s[11]||(s[11]=[t("span",{class:"arrow-icon"},null,-1)])]),t("button",{class:"nav-arrow nav-right",type:"button",onClick:L},[...s[12]||(s[12]=[t("span",{class:"arrow-icon"},null,-1)])])],32)])])]),t("section",ft,[t("div",gt,[s[20]||(s[20]=t("div",{class:"panel-hd"},[t("div",{class:"panel-title"},"场站信息")],-1)),t("div",xt,[t("div",kt,[t("div",wt,[s[14]||(s[14]=t("div",{class:"k"},"场站",-1)),t("div",St,l(i(o).station.name),1)]),t("div",Ct,[s[15]||(s[15]=t("div",{class:"k"},"装机容量",-1)),t("div",Mt,l(i(o).station.capacityMW)+" MW",1)]),t("div",At,[s[16]||(s[16]=t("div",{class:"k"},"在线率",-1)),t("div",It,l(i(o).station.onlineRate)+"%",1)]),t("div",$t,[s[17]||(s[17]=t("div",{class:"k"},"健康指数",-1)),t("div",Lt,l(i(o).station.healthIndex),1)]),t("div",Tt,[s[18]||(s[18]=t("div",{class:"k"},"运行天数",-1)),t("div",Vt,l(i(o).station.runningDays),1)]),t("div",Bt,[s[19]||(s[19]=t("div",{class:"k"},"位置",-1)),t("div",Wt,l(i(o).station.location),1)])])])]),t("div",Dt,[t("div",jt,[s[21]||(s[21]=t("div",{class:"panel-title"},"缺陷闭环",-1)),t("div",Ht,"总计 "+l(i(o).donut.total),1)]),t("div",Nt,[t("div",Pt,[w(M,{option:j.value,height:"220px"},null,8,["option"])])])]),t("div",Rt,[s[22]||(s[22]=t("div",{class:"panel-hd"},[t("div",{class:"panel-title"},"缺陷统计")],-1)),t("div",zt,[t("div",Et,[(d(!0),n(m,null,y(i(o).defectCards,e=>(d(),n("div",{class:"mini",key:e.label},[t("div",Ft,l(e.value),1),t("div",Ot,l(e.label),1)]))),128))])])])])]),t("footer",Xt,[t("div",qt,[t("button",{class:C(["mode-btn",{active:u.value==="uav"}]),type:"button",onClick:s[1]||(s[1]=e=>u.value="uav")}," 无人机 ",2),t("button",{class:C(["mode-btn",{active:u.value==="robot"}]),type:"button",onClick:s[2]||(s[2]=e=>u.value="robot")}," 机器人 ",2)]),s[23]||(s[23]=t("div",{class:"hint"},"开发 Mock 数据 · 大屏布局复刻",-1))])]))}}),Qt=E(Gt,[["__scopeId","data-v-71f2308d"]]);export{Qt as default};
