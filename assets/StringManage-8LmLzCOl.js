import{L as W}from"./LinkOutlined-C3Xs3Xaw.js";import{h,x as tt,c as L,a as e,w as a,f as E,r as d,g as N,o as M,i as f,d as r,l as w,F as et,t as x,E as nt,p as ot,L as at,R as lt,s as P,e as p,_ as it}from"./index-DmuTLrRo.js";const st={class:"string-page"},rt={class:"ruben-toolbar"},dt={class:"toolbar-left"},ut={class:"toolbar-right"},ct={class:"table-wrap"},ft={key:1,class:"cell-actions"},gt={class:"ruben-pagination"},mt={class:"page-info"},pt={class:"page-controls"},vt=h({__name:"StringManage",setup(_t){const v=E({type:"string",keyword:""}),_=N(!1),l=E({current:1,pageSize:10,total:610}),g=P(()=>Math.ceil(l.total/l.pageSize)),y=N([]),z=P(()=>({selectedRowKeys:y.value,onChange:n=>{y.value=n.map(String)}})),A=P(()=>[{title:"序号",key:"index",width:80,align:"center"},{title:"组串编号",dataIndex:"stringNo",key:"stringNo",align:"center"},{title:"逆变器编号",dataIndex:"inverterNo",key:"inverterNo",align:"center"},{title:"电压(V)",dataIndex:"voltage",key:"voltage",align:"center"},{title:"电流(A)",dataIndex:"current",key:"current",align:"center"},{title:"面板倾斜角度(°)",dataIndex:"tilt",key:"tilt",align:"center"},{title:"组串型号",dataIndex:"model",key:"model",align:"center"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",align:"center"},{title:"操作",key:"actions",width:120,align:"center"}]),U=N([]);function R(n){const t=(l.current-1)*l.pageSize+n,u=t%3+1,C=[220,190,216],c=[1100,2932,1823],s=[35,28,45],S=["Y028","ZX-027","BN-23"];return{id:`string_${t}`,stringNo:`组串${u}`,inverterNo:`逆变器${u}`,voltage:C[(u-1)%3],current:c[(u-1)%3],tilt:s[(u-1)%3],model:S[(u-1)%3],createdAt:"2022-09-22  12:09"}}async function b(){_.value=!0;try{await new Promise(n=>setTimeout(n,300)),U.value=Array.from({length:l.pageSize}).map((n,t)=>R(t+1))}finally{_.value=!1}}function B(){l.current=1,y.value=[],b()}function m(n){const t=Math.min(Math.max(1,n),g.value);t!==l.current&&(l.current=t,y.value=[],b())}function F(){m(1)}function $(){m(g.value)}function T(){m(l.current-1)}function D(){m(l.current+1)}const k=N("3");tt(()=>l.current,n=>{k.value=String(n)},{immediate:!0});function O(){const n=Number(k.value);if(!Number.isFinite(n)||n<=0){p.warning("请输入有效页码");return}m(n)}const o=E({open:!1,saving:!1,recordId:"",form:{stringNo:"",inverterNo:"",model:""}});function G(n){o.recordId=n.id,o.form.stringNo=n.stringNo,o.form.inverterNo=n.inverterNo,o.form.model=n.model,o.open=!0}function V(){o.open=!1,o.recordId="",o.form.stringNo="",o.form.inverterNo="",o.form.model=""}async function K(){o.saving=!0;try{await new Promise(n=>setTimeout(n,300)),p.success("保存成功（mock）"),V(),b()}finally{o.saving=!1}}function Q(){p.info("批量绑定：mock")}function q(){p.info("快速编辑：mock")}function X(){p.info("可视化建模：mock")}return b(),(n,t)=>{const u=d("a-radio"),C=d("a-radio-group"),c=d("a-input"),s=d("a-button"),S=d("a-table"),Y=d("a-card"),I=d("a-form-item"),Z=d("a-form"),j=d("a-modal");return M(),L("div",st,[e(Y,{class:"string-card",bordered:!1},{default:a(()=>[f("div",rt,[f("div",dt,[e(C,{value:v.type,"onUpdate:value":t[0]||(t[0]=i=>v.type=i),class:"toolbar-radio"},{default:a(()=>[e(u,{value:"string"},{default:a(()=>[...t[7]||(t[7]=[r("组串",-1)])]),_:1})]),_:1},8,["value"]),e(c,{value:v.keyword,"onUpdate:value":t[1]||(t[1]=i=>v.keyword=i),class:"toolbar-input",placeholder:"请输入名称","allow-clear":"",onPressEnter:B},null,8,["value"]),e(s,{type:"primary",class:"toolbar-query",loading:_.value,onClick:B},{default:a(()=>[...t[8]||(t[8]=[r(" 查询 ",-1)])]),_:1},8,["loading"])]),f("div",ut,[e(s,{class:"btn-light",onClick:Q},{icon:a(()=>[e(w(W))]),default:a(()=>[t[9]||(t[9]=r(" 批量绑定 ",-1))]),_:1}),e(s,{class:"btn-light",onClick:q},{default:a(()=>[...t[10]||(t[10]=[r(" 快速编辑 ",-1)])]),_:1}),e(s,{type:"primary",class:"btn-primary-strong",onClick:X},{default:a(()=>[...t[11]||(t[11]=[r(" 可视化建模 ",-1)])]),_:1})])]),f("div",ct,[e(S,{class:"ruben-table",columns:A.value,"data-source":U.value,loading:_.value,pagination:!1,"row-selection":z.value,"row-key":i=>i.id,scroll:{x:1200}},{bodyCell:a(({column:i,record:H,index:J})=>[i.key==="index"?(M(),L(et,{key:0},[r(x((l.current-1)*l.pageSize+J+1),1)],64)):i.key==="actions"?(M(),L("div",ft,[e(s,{type:"link",class:"action-edit",onClick:yt=>G(H)},{default:a(()=>[t[12]||(t[12]=r(" 修改 ",-1)),e(w(nt),{class:"action-icon"})]),_:1},8,["onClick"])])):ot("",!0)]),_:1},8,["columns","data-source","loading","row-selection","row-key"])]),f("div",gt,[f("div",mt,"当前第 ["+x(l.current)+"] 页 / 共 ["+x(g.value)+"] 页",1),f("div",pt,[e(c,{value:k.value,"onUpdate:value":t[2]||(t[2]=i=>k.value=i),class:"goto-input",maxlength:3,onPressEnter:O},null,8,["value"]),e(s,{class:"go-btn",onClick:O},{default:a(()=>[...t[13]||(t[13]=[r("GO",-1)])]),_:1}),e(s,{class:"page-btn",disabled:l.current===1,onClick:F},{default:a(()=>[...t[14]||(t[14]=[r(" 首页 ",-1)])]),_:1},8,["disabled"]),e(s,{class:"page-btn icon",disabled:l.current===1,onClick:T},{default:a(()=>[e(w(at))]),_:1},8,["disabled"]),e(s,{class:"page-btn current"},{default:a(()=>[r(x(l.current),1)]),_:1}),e(s,{class:"page-btn icon",disabled:l.current===g.value,onClick:D},{default:a(()=>[e(w(lt))]),_:1},8,["disabled"]),e(s,{class:"page-btn",disabled:l.current===g.value,onClick:$},{default:a(()=>[...t[15]||(t[15]=[r(" 末页 ",-1)])]),_:1},8,["disabled"])])])]),_:1}),e(j,{open:o.open,"onUpdate:open":t[6]||(t[6]=i=>o.open=i),title:"修改","confirm-loading":o.saving,onOk:K,onCancel:V,"destroy-on-close":""},{default:a(()=>[e(Z,{layout:"vertical"},{default:a(()=>[e(I,{label:"组串编号"},{default:a(()=>[e(c,{value:o.form.stringNo,"onUpdate:value":t[3]||(t[3]=i=>o.form.stringNo=i)},null,8,["value"])]),_:1}),e(I,{label:"逆变器编号"},{default:a(()=>[e(c,{value:o.form.inverterNo,"onUpdate:value":t[4]||(t[4]=i=>o.form.inverterNo=i)},null,8,["value"])]),_:1}),e(I,{label:"组串型号"},{default:a(()=>[e(c,{value:o.form.model,"onUpdate:value":t[5]||(t[5]=i=>o.form.model=i)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","confirm-loading"])])}}}),Nt=it(vt,[["__scopeId","data-v-7482a6d6"]]);export{Nt as default};
