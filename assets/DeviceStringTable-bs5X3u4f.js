import{L as ot}from"./LinkOutlined-C3Xs3Xaw.js";import{a as e,I as $,h as rt,x as lt,c as P,w as r,f as V,r as m,g as N,o as I,i as g,d as f,l as b,F as it,t as x,E as st,p as ct,L as ut,R as dt,s as L,e as y,_ as ft}from"./index-DmuTLrRo.js";var mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"};function F(s){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),n.forEach(function(u){vt(s,u,o[u])})}return s}function vt(s,a,o){return a in s?Object.defineProperty(s,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[a]=o,s}var z=function(a,o){var n=F({},a,o.attrs);return e($,F({},n,{icon:mt}),null)};z.displayName="ApartmentOutlined";z.inheritAttrs=!1;var pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};function M(s){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),n.forEach(function(u){gt(s,u,o[u])})}return s}function gt(s,a,o){return a in s?Object.defineProperty(s,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[a]=o,s}var H=function(a,o){var n=M({},a,o.attrs);return e($,M({},n,{icon:pt}),null)};H.displayName="FormOutlined";H.inheritAttrs=!1;const bt={class:"device-string-page"},_t={class:"toolbar"},yt={class:"toolbar-left"},kt={class:"toolbar-right"},Ot={class:"table-wrap"},wt={key:1,class:"cell-actions"},Nt={class:"pagination-bar"},xt={class:"page-info"},St={class:"page-controls"},ht=rt({__name:"DeviceStringTable",setup(s){const a=V({type:"string",keyword:""}),o=N(!1),n=V({current:1,pageSize:10,total:610}),u=L(()=>Math.ceil(n.total/n.pageSize)),k=N([]),U=L(()=>({selectedRowKeys:k.value,onChange:l=>{k.value=l.map(String)}})),D=L(()=>[{title:"序号",key:"index",width:80,align:"center"},{title:"组串编号",dataIndex:"stringNo",key:"stringNo",align:"center"},{title:"逆变器编号",dataIndex:"inverterNo",key:"inverterNo",align:"center"},{title:"电压(V)",dataIndex:"voltage",key:"voltage",align:"center"},{title:"电流(A)",dataIndex:"current",key:"current",align:"center"},{title:"面板倾斜角度(°)",dataIndex:"tilt",key:"tilt",align:"center"},{title:"组串型号",dataIndex:"model",key:"model",align:"center"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",align:"center"},{title:"操作",key:"actions",width:120,align:"center"}]),A=N([]);function R(l){const t=(n.current-1)*n.pageSize+l,v=t%3+1,S=[220,190,216],p=[1100,2932,1823],d=[35,28,45],h=["Y028","ZX-027","BN-23"];return{id:`device_string_${t}`,stringNo:`组串${v}`,inverterNo:`逆变器${v}`,voltage:S[(v-1)%3],current:p[(v-1)%3],tilt:d[(v-1)%3],model:h[(v-1)%3],createdAt:"2022-09-22  12:09"}}async function O(){o.value=!0;try{await new Promise(l=>setTimeout(l,300)),A.value=Array.from({length:n.pageSize}).map((l,t)=>R(t+1))}finally{o.value=!1}}function E(){n.current=1,k.value=[],O()}function _(l){const t=Math.min(Math.max(1,l),u.value);t!==n.current&&(n.current=t,k.value=[],O())}function T(){_(1)}function G(){_(u.value)}function Q(){_(n.current-1)}function q(){_(n.current+1)}const w=N("3");lt(()=>n.current,l=>{w.value=String(l)},{immediate:!0});function j(){const l=Number(w.value);if(!Number.isFinite(l)||l<=0){y.warning("请输入有效页码");return}_(l)}const i=V({open:!1,saving:!1,recordId:"",form:{stringNo:"",inverterNo:"",model:""}});function X(l){i.recordId=l.id,i.form.stringNo=l.stringNo,i.form.inverterNo=l.inverterNo,i.form.model=l.model,i.open=!0}function B(){i.open=!1,i.recordId="",i.form.stringNo="",i.form.inverterNo="",i.form.model=""}async function Y(){i.saving=!0;try{await new Promise(l=>setTimeout(l,300)),y.success("保存成功（mock）"),B(),O()}finally{i.saving=!1}}function Z(){y.info("批量绑定：mock")}function J(){y.info("快速编辑：mock")}function W(){y.info("可视化建模：mock")}return O(),(l,t)=>{const v=m("a-radio"),S=m("a-radio-group"),p=m("a-input"),d=m("a-button"),h=m("a-table"),K=m("a-card"),C=m("a-form-item"),tt=m("a-form"),et=m("a-modal");return I(),P("div",bt,[e(K,{class:"device-string-card",bordered:!1},{default:r(()=>[g("div",_t,[g("div",yt,[e(S,{value:a.type,"onUpdate:value":t[0]||(t[0]=c=>a.type=c),class:"toolbar-radio"},{default:r(()=>[e(v,{value:"string"},{default:r(()=>[...t[7]||(t[7]=[f("组串",-1)])]),_:1})]),_:1},8,["value"]),e(p,{value:a.keyword,"onUpdate:value":t[1]||(t[1]=c=>a.keyword=c),class:"toolbar-input",placeholder:"请输入名称","allow-clear":"",onPressEnter:E},null,8,["value"]),e(d,{type:"primary",class:"toolbar-query",loading:o.value,onClick:E},{default:r(()=>[...t[8]||(t[8]=[f(" 查询 ",-1)])]),_:1},8,["loading"])]),g("div",kt,[e(d,{class:"btn-outline",onClick:Z},{icon:r(()=>[e(b(ot))]),default:r(()=>[t[9]||(t[9]=f(" 批量绑定 ",-1))]),_:1}),e(d,{class:"btn-outline",onClick:J},{icon:r(()=>[e(b(H))]),default:r(()=>[t[10]||(t[10]=f(" 快速编辑 ",-1))]),_:1}),e(d,{type:"primary",class:"btn-primary",onClick:W},{icon:r(()=>[e(b(z))]),default:r(()=>[t[11]||(t[11]=f(" 可视化建模 ",-1))]),_:1})])]),g("div",Ot,[e(h,{class:"ruben-table",columns:D.value,"data-source":A.value,loading:o.value,pagination:!1,"row-selection":U.value,"row-key":c=>c.id,scroll:{x:1200}},{bodyCell:r(({column:c,record:nt,index:at})=>[c.key==="index"?(I(),P(it,{key:0},[f(x((n.current-1)*n.pageSize+at+1),1)],64)):c.key==="actions"?(I(),P("div",wt,[e(d,{type:"link",class:"action-edit",onClick:Ct=>X(nt)},{default:r(()=>[t[12]||(t[12]=f(" 修改 ",-1)),e(b(st),{class:"action-icon"})]),_:1},8,["onClick"])])):ct("",!0)]),_:1},8,["columns","data-source","loading","row-selection","row-key"])]),g("div",Nt,[g("div",xt,"当前第 ["+x(n.current)+"] 页 / 共 ["+x(u.value)+"] 页",1),g("div",St,[e(p,{value:w.value,"onUpdate:value":t[2]||(t[2]=c=>w.value=c),class:"goto-input",maxlength:3,onPressEnter:j},null,8,["value"]),e(d,{class:"go-btn",onClick:j},{default:r(()=>[...t[13]||(t[13]=[f("GO",-1)])]),_:1}),e(d,{class:"page-btn",disabled:n.current===1,onClick:T},{default:r(()=>[...t[14]||(t[14]=[f(" 首页 ",-1)])]),_:1},8,["disabled"]),e(d,{class:"page-btn icon",disabled:n.current===1,onClick:Q},{default:r(()=>[e(b(ut))]),_:1},8,["disabled"]),e(d,{class:"page-btn current"},{default:r(()=>[f(x(n.current),1)]),_:1}),e(d,{class:"page-btn icon",disabled:n.current===u.value,onClick:q},{default:r(()=>[e(b(dt))]),_:1},8,["disabled"]),e(d,{class:"page-btn",disabled:n.current===u.value,onClick:G},{default:r(()=>[...t[15]||(t[15]=[f(" 末页 ",-1)])]),_:1},8,["disabled"])])])]),_:1}),e(et,{open:i.open,"onUpdate:open":t[6]||(t[6]=c=>i.open=c),title:"修改","confirm-loading":i.saving,onOk:Y,onCancel:B,"destroy-on-close":""},{default:r(()=>[e(tt,{layout:"vertical"},{default:r(()=>[e(C,{label:"组串编号"},{default:r(()=>[e(p,{value:i.form.stringNo,"onUpdate:value":t[3]||(t[3]=c=>i.form.stringNo=c)},null,8,["value"])]),_:1}),e(C,{label:"逆变器编号"},{default:r(()=>[e(p,{value:i.form.inverterNo,"onUpdate:value":t[4]||(t[4]=c=>i.form.inverterNo=c)},null,8,["value"])]),_:1}),e(C,{label:"组串型号"},{default:r(()=>[e(p,{value:i.form.model,"onUpdate:value":t[5]||(t[5]=c=>i.form.model=c)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","confirm-loading"])])}}}),It=ft(ht,[["__scopeId","data-v-7f362042"]]);export{It as default};
